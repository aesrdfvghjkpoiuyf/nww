{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\neeee\\\\quickstart-calls-reactjs\\\\sample-01\\\\src\\\\components\\\\organisms\\\\Preview\\\\Preview.tsx\",\n  _s2 = $RefreshSig$();\nimport { Avatar, ParticipantOverlay } from 'components/organisms/GroupCall/MediaContent';\nimport React from 'react';\nimport SendbirdCall, { useSbCalls } from 'lib/sendbird-calls';\nimport { useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport Modal from 'components/templates/Modal';\nimport { heavy, normal } from 'styles/fonts';\nimport { toast } from \"react-toastify\";\nimport { ErrorMessage } from \"../../atoms/Toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VideoBox = styled.div`\n  position: relative;\n  width: 432px;\n  height: ${props => props.height}px;\n  margin-bottom: 17px;\n  background-color: var(--navy-800);\n  video {\n    width: 100%;\n    height: 100%;\n  }\n`;\n_c = VideoBox;\nconst CheckBoxWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  ${normal};\n  ${heavy};\n  color: var(--navy-900);\n  cursor: pointer;\n  input {\n    width: 18px;\n    height: 18px;\n    margin-right: 9px;\n  }\n  margin-bottom: 10px;\n`;\n_c2 = CheckBoxWrapper;\nconst CheckBox = styled.div`\n  width: 20px;\n  height: 20px;\n  margin: 0 8px 0 0;\n  padding: 1px;\n  object-fit: contain;\n  background-image: url(${props => props.selected ? '/icons/icon-checkbox-selected.svg' : '/icons/icon-checkbox-unselected.svg'});\n  background-repeat: no-repeat;\n  background-position: center center;\n`;\n_c3 = CheckBox;\nconst Preview = props => {\n  _s2();\n  var _s = $RefreshSig$(),\n    _sbCalls$user;\n  const sbCalls = useSbCalls();\n  const videoRef = useRef(null);\n  const [audioEnabled, setAudioEnabled] = useState(true);\n  const [videoEnabled, setVideoEnabled] = useState(true);\n  const [videoHeight, setVideoHeight] = useState(243);\n  _s(useEffect(_s(() => {\n    _s();\n    if (!props.isOpen || !videoEnabled) return () => {};\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const mediaAccess = SendbirdCall.useMedia({\n      audio: true,\n      video: videoEnabled\n    });\n\n    // @ts-ignore\n    mediaAccess.on('streamChanged', stream => {\n      if (videoRef.current) videoRef.current.srcObject = stream;\n    });\n    return () => {\n      if (videoRef.current) videoRef.current.srcObject = null;\n      mediaAccess === null || mediaAccess === void 0 ? void 0 : mediaAccess.dispose();\n    };\n  }, \"7rWEMYW/VflFE7uNvAV3LOC9zqk=\", false, function () {\n    return [SendbirdCall.useMedia];\n  }), [props.isOpen, videoEnabled]), \"7rWEMYW/VflFE7uNvAV3LOC9zqk=\", false, function () {\n    return [SendbirdCall.useMedia];\n  });\n  useEffect(() => {\n    if (!videoRef.current) return;\n    setVideoHeight(Math.max(videoRef.current.offsetHeight, videoHeight));\n  }, [videoHeight, videoEnabled]);\n  const enter = () => {\n    props.close();\n    props.room.enter({\n      audioEnabled,\n      videoEnabled\n    }).catch(error => {\n      toast.error( /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        message: error.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 19\n      }, this), {\n        autoClose: 2000\n      });\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    title: \"Enter room\",\n    content: /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(VideoBox, {\n        height: videoHeight,\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: videoRef,\n          autoPlay: true,\n          playsInline: true,\n          muted: !audioEnabled\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), videoEnabled || /*#__PURE__*/_jsxDEV(ParticipantOverlay, {\n          children: /*#__PURE__*/_jsxDEV(Avatar, {\n            url: (_sbCalls$user = sbCalls.user) === null || _sbCalls$user === void 0 ? void 0 : _sbCalls$user.profileUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CheckBoxWrapper, {\n        onClick: () => setAudioEnabled(!audioEnabled),\n        children: [/*#__PURE__*/_jsxDEV(CheckBox, {\n          selected: !audioEnabled\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this), \"Mute my audio\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CheckBoxWrapper, {\n        onClick: () => setVideoEnabled(!videoEnabled),\n        children: [/*#__PURE__*/_jsxDEV(CheckBox, {\n          selected: !videoEnabled\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this), \"Turn off my video\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: '22px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this),\n    footer: {\n      cancel: {\n        label: 'Cancel'\n      },\n      confirm: {\n        label: 'Enter',\n        onClick: enter\n      }\n    },\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n_s2(Preview, \"kHfBtjjdXhCck268ZJBCZ0UkePY=\", false, function () {\n  return [useSbCalls];\n});\n_c4 = Preview;\nexport default Preview;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"VideoBox\");\n$RefreshReg$(_c2, \"CheckBoxWrapper\");\n$RefreshReg$(_c3, \"CheckBox\");\n$RefreshReg$(_c4, \"Preview\");","map":{"version":3,"names":["Avatar","ParticipantOverlay","React","SendbirdCall","useSbCalls","useEffect","useRef","useState","styled","Modal","heavy","normal","toast","ErrorMessage","jsxDEV","_jsxDEV","VideoBox","div","props","height","_c","CheckBoxWrapper","_c2","CheckBox","selected","_c3","Preview","_s2","_s","$RefreshSig$","_sbCalls$user","sbCalls","videoRef","audioEnabled","setAudioEnabled","videoEnabled","setVideoEnabled","videoHeight","setVideoHeight","isOpen","mediaAccess","useMedia","audio","video","on","stream","current","srcObject","dispose","Math","max","offsetHeight","enter","close","room","catch","error","message","fileName","_jsxFileName","lineNumber","columnNumber","autoClose","title","content","Fragment","children","ref","autoPlay","playsInline","muted","url","user","profileUrl","onClick","style","footer","cancel","label","confirm","_c4","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/neeee/quickstart-calls-reactjs/sample-01/src/components/organisms/Preview/Preview.tsx"],"sourcesContent":["import { Avatar, ParticipantOverlay } from 'components/organisms/GroupCall/MediaContent';\r\nimport React from 'react';\r\nimport SendbirdCall, { useSbCalls, StatefulRoom } from 'lib/sendbird-calls';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport Modal from 'components/templates/Modal';\r\nimport ReactModal from 'react-modal';\r\nimport { heavy, normal } from 'styles/fonts';\r\nimport { toast } from \"react-toastify\";\r\nimport { ErrorMessage } from \"../../atoms/Toast\";\r\n\r\nconst VideoBox = styled.div<{ height: number; }>`\r\n  position: relative;\r\n  width: 432px;\r\n  height: ${props => props.height}px;\r\n  margin-bottom: 17px;\r\n  background-color: var(--navy-800);\r\n  video {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n`\r\n\r\nconst CheckBoxWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  ${normal};\r\n  ${heavy};\r\n  color: var(--navy-900);\r\n  cursor: pointer;\r\n  input {\r\n    width: 18px;\r\n    height: 18px;\r\n    margin-right: 9px;\r\n  }\r\n  margin-bottom: 10px;\r\n`\r\n\r\nconst CheckBox = styled.div<{ selected: boolean; }>`\r\n  width: 20px;\r\n  height: 20px;\r\n  margin: 0 8px 0 0;\r\n  padding: 1px;\r\n  object-fit: contain;\r\n  background-image: url(${props => props.selected ? '/icons/icon-checkbox-selected.svg' : '/icons/icon-checkbox-unselected.svg'});\r\n  background-repeat: no-repeat;\r\n  background-position: center center;\r\n`;\r\n\r\nconst Preview = (props: ReactModal.Props & { close: () => void; room: StatefulRoom }) => {\r\n  const sbCalls = useSbCalls();\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const [audioEnabled, setAudioEnabled] = useState(true);\r\n  const [videoEnabled, setVideoEnabled] = useState(true);\r\n  const [videoHeight, setVideoHeight] = useState(243);\r\n\r\n  useEffect(() => {\r\n    if (!props.isOpen || !videoEnabled) return () => {};\r\n    // eslint-disable-next-line react-hooks/rules-of-hooks\r\n    const mediaAccess = SendbirdCall.useMedia({ audio: true, video: videoEnabled })\r\n\r\n    // @ts-ignore\r\n    mediaAccess.on('streamChanged', (stream) => {\r\n      if (videoRef.current) videoRef.current.srcObject = stream;\r\n    });\r\n\r\n    return () => {\r\n      if (videoRef.current) videoRef.current.srcObject = null;\r\n      mediaAccess?.dispose();\r\n    }\r\n  }, [props.isOpen, videoEnabled]);\r\n\r\n  useEffect(() => {\r\n    if (!videoRef.current) return;\r\n    setVideoHeight(Math.max(videoRef.current.offsetHeight, videoHeight));\r\n  }, [videoHeight, videoEnabled])\r\n\r\n  const enter = () => {\r\n    props.close();\r\n    props.room.enter({\r\n      audioEnabled,\r\n      videoEnabled,\r\n    }).catch(error => {\r\n      toast.error(<ErrorMessage message={error.message} />, { autoClose: 2000 });\r\n    })\r\n  }\r\n  return (\r\n    <Modal\r\n      title=\"Enter room\"\r\n      content={(\r\n        <React.Fragment>\r\n          <VideoBox height={videoHeight}>\r\n            <video ref={videoRef} autoPlay playsInline muted={!audioEnabled} />\r\n            {videoEnabled ||\r\n              <ParticipantOverlay>\r\n                <Avatar url={sbCalls.user?.profileUrl} />\r\n              </ParticipantOverlay>\r\n            }\r\n          </VideoBox>\r\n\r\n          <CheckBoxWrapper onClick={() => setAudioEnabled(!audioEnabled)}>\r\n            <CheckBox selected={!audioEnabled}/>\r\n            Mute my audio\r\n          </CheckBoxWrapper>\r\n          <CheckBoxWrapper onClick={() => setVideoEnabled(!videoEnabled)}>\r\n            <CheckBox selected={!videoEnabled}/>\r\n            Turn off my video\r\n          </CheckBoxWrapper>\r\n          <div style={{ height: '22px' }}/>\r\n        </React.Fragment>\r\n      )}\r\n      footer={{\r\n        cancel: { label: 'Cancel' },\r\n        confirm: { label: 'Enter', onClick: enter }\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Preview;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}