{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\neeee\\\\Group Call\\\\sample-01\\\\src\\\\components\\\\organisms\\\\LoginForm\\\\LoginForm.tsx\",\n  _s = $RefreshSig$();\nimport { ErrorMessage } from 'components/atoms/Toast';\nimport { useEffect } from 'react';\nimport { useLocation } from 'react-use';\nimport styled from 'styled-components';\nimport { useHistory } from 'react-router-dom';\nimport Button from 'components/atoms/Button';\nimport Input, { useTextInput } from 'components/atoms/Input';\nimport { useSbCalls } from 'lib/sendbird-calls';\nimport { SoundType } from 'sendbird-calls';\nimport { toast } from 'react-toastify';\nimport storage from 'lib/storage';\nimport * as fonts from 'styles/fonts';\nimport { media } from 'utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FormContainer = styled.form`\n  width: 100%;\n  box-sizing: border-box;\n  padding: 0 24px;\n  background-color: var(--white);\n  \n  ${Input} {\n    margin-bottom: 16px;\n  }\n  \n  ${media.main} {\n    max-width: 500px;\n    border: solid 1px #dee2f2;\n    border-radius: 4px;\n    padding: 0 48px;\n  }\n`;\n_c = FormContainer;\nconst InputLabel = styled.label`\n  ${fonts.small};\n  ${fonts.heavy};\n  height: 12px;\n  display: inline-block;\n  margin-top: 6px;\n  margin-bottom: 6px;\n  &:first-of-type {\n    margin-top: 38px;\n  }\n`;\n_c2 = InputLabel;\nconst LoginButton = styled(Button)`\n  ${fonts.normal};\n  ${fonts.demi};\n  color: var(--white);\n  width: 100%;\n  margin-bottom: 40px;\n`;\n_c3 = LoginButton;\nconst LoginForm = props => {\n  _s();\n  const sbCalls = useSbCalls();\n  const history = useHistory();\n  const query = new URLSearchParams(useLocation().search);\n  let authArgs = {};\n  const authQuery = query.get('q');\n  if (authQuery) {\n    try {\n      authArgs = JSON.parse(atob(authQuery));\n    } catch (e) {}\n  }\n  const stored = storage.getItem('sbCalls');\n  const APP_ID = authArgs.app_id || (stored === null || stored === void 0 ? void 0 : stored.appId) || process.env.REACT_APP_APP_ID || '';\n  const USER_ID = authArgs.user_id || (stored === null || stored === void 0 ? void 0 : stored.userId) || process.env.REACT_APP_USER_ID || '';\n  const ACCESS_TOKEN = authArgs.access_token || (stored === null || stored === void 0 ? void 0 : stored.accessToken) || process.env.REACT_APP_ACCESS_TOKEN || '';\n  const IS_ACCESS_TOKEN_NEEDED = process.env.REACT_APP_IS_ACCESS_TOKEN_NEEDED === 'true';\n  const ROOM_ID = authArgs.room_id || '';\n  const [appId, appIdInput] = useTextInput({\n    id: 'appIdInput',\n    initValue: APP_ID\n  });\n  const [userId, userIdInput] = useTextInput({\n    id: 'userIdInput',\n    initValue: USER_ID\n  });\n  const [accessToken, accessTokenInput] = useTextInput({\n    id: 'accessTokenInput',\n    initValue: ACCESS_TOKEN\n  });\n  const login = () => {\n    const option = {\n      userId\n    };\n    if (IS_ACCESS_TOKEN_NEEDED || authArgs.access_token) option.accessToken = accessToken;\n    sbCalls.init(appId);\n    sbCalls.addDirectCallSound(SoundType.DIALING, '/sounds/Dialing.mp3');\n    sbCalls.addDirectCallSound(SoundType.RINGING, '/sounds/Ringing.mp3');\n    sbCalls.addDirectCallSound(SoundType.RECONNECTING, '/sounds/Reconnecting.mp3');\n    sbCalls.addDirectCallSound(SoundType.RECONNECTED, '/sounds/Reconnected.mp3');\n    return sbCalls.auth(option).then(user => {\n      storage.setItem('sbCalls', {\n        appId,\n        userId\n      });\n      history.push(`${query.get('referrer') ? query.get('referrer') + `?room_id=${ROOM_ID}` : '/'}`);\n    }).catch(error => {\n      toast.error( /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        message: `Check entered information and try again.`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }, this), {\n        autoClose: 2000\n      });\n    });\n  };\n  useEffect(() => {\n    if (authArgs.app_id) login();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(FormContainer, {\n    children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n      htmlFor: \"appIdInput\",\n      children: \"App ID\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), appIdInput, /*#__PURE__*/_jsxDEV(InputLabel, {\n      htmlFor: \"userIdInput\",\n      children: \"User ID\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), userIdInput, IS_ACCESS_TOKEN_NEEDED && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n        htmlFor: \"accessTokenInput\",\n        children: \"Access Token\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this), accessTokenInput]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(LoginButton, {\n      primary: true,\n      size: \"mid\",\n      onClick: () => login(),\n      children: \"Sign in\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginForm, \"XQqWMJgRbwk7UI6vQhvD5giaznw=\", false, function () {\n  return [useSbCalls, useHistory, useLocation, useTextInput, useTextInput, useTextInput];\n});\n_c4 = LoginForm;\nexport default LoginForm;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"FormContainer\");\n$RefreshReg$(_c2, \"InputLabel\");\n$RefreshReg$(_c3, \"LoginButton\");\n$RefreshReg$(_c4, \"LoginForm\");","map":{"version":3,"names":["ErrorMessage","useEffect","useLocation","styled","useHistory","Button","Input","useTextInput","useSbCalls","SoundType","toast","storage","fonts","media","jsxDEV","_jsxDEV","Fragment","_Fragment","FormContainer","form","main","_c","InputLabel","label","small","heavy","_c2","LoginButton","normal","demi","_c3","LoginForm","props","_s","sbCalls","history","query","URLSearchParams","search","authArgs","authQuery","get","JSON","parse","atob","e","stored","getItem","APP_ID","app_id","appId","process","env","REACT_APP_APP_ID","USER_ID","user_id","userId","REACT_APP_USER_ID","ACCESS_TOKEN","access_token","accessToken","REACT_APP_ACCESS_TOKEN","IS_ACCESS_TOKEN_NEEDED","REACT_APP_IS_ACCESS_TOKEN_NEEDED","ROOM_ID","room_id","appIdInput","id","initValue","userIdInput","accessTokenInput","login","option","init","addDirectCallSound","DIALING","RINGING","RECONNECTING","RECONNECTED","auth","then","user","setItem","push","catch","error","message","fileName","_jsxFileName","lineNumber","columnNumber","autoClose","children","htmlFor","primary","size","onClick","_c4","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/neeee/Group Call/sample-01/src/components/organisms/LoginForm/LoginForm.tsx"],"sourcesContent":["import { ErrorMessage } from 'components/atoms/Toast';\r\nimport { useEffect } from 'react';\r\nimport { useLocation } from 'react-use';\r\nimport styled from 'styled-components';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport Button from 'components/atoms/Button';\r\nimport Input, { useTextInput } from 'components/atoms/Input';\r\nimport { useSbCalls } from 'lib/sendbird-calls';\r\nimport { SoundType } from 'sendbird-calls';\r\nimport type { AuthOption } from 'sendbird-calls';\r\nimport { toast } from 'react-toastify';\r\nimport storage from 'lib/storage';\r\nimport * as fonts from 'styles/fonts';\r\n\r\nimport { media } from 'utils';\r\n\r\nconst FormContainer = styled.form`\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  padding: 0 24px;\r\n  background-color: var(--white);\r\n  \r\n  ${Input} {\r\n    margin-bottom: 16px;\r\n  }\r\n  \r\n  ${media.main} {\r\n    max-width: 500px;\r\n    border: solid 1px #dee2f2;\r\n    border-radius: 4px;\r\n    padding: 0 48px;\r\n  }\r\n`;\r\n\r\nconst InputLabel = styled.label`\r\n  ${fonts.small};\r\n  ${fonts.heavy};\r\n  height: 12px;\r\n  display: inline-block;\r\n  margin-top: 6px;\r\n  margin-bottom: 6px;\r\n  &:first-of-type {\r\n    margin-top: 38px;\r\n  }\r\n`;\r\n\r\nconst LoginButton = styled(Button)`\r\n  ${fonts.normal};\r\n  ${fonts.demi};\r\n  color: var(--white);\r\n  width: 100%;\r\n  margin-bottom: 40px;\r\n`;\r\n\r\ninterface LoginFormProps {}\r\nconst LoginForm = (props: LoginFormProps) => {\r\n  const sbCalls = useSbCalls();\r\n  const history = useHistory();\r\n  const query = new URLSearchParams(useLocation().search);\r\n  let authArgs: any = {};\r\n  const authQuery = query.get('q');\r\n  if (authQuery) {\r\n    try {\r\n      authArgs = JSON.parse(atob(authQuery));\r\n    } catch(e) {}\r\n  }\r\n\r\n  const stored = storage.getItem('sbCalls');\r\n\r\n  const APP_ID = authArgs.app_id || stored?.appId || process.env.REACT_APP_APP_ID || '';\r\n  const USER_ID = authArgs.user_id || stored?.userId || process.env.REACT_APP_USER_ID || '';\r\n  const ACCESS_TOKEN = authArgs.access_token || stored?.accessToken || process.env.REACT_APP_ACCESS_TOKEN || '';\r\n  const IS_ACCESS_TOKEN_NEEDED = process.env.REACT_APP_IS_ACCESS_TOKEN_NEEDED === 'true';\r\n  const ROOM_ID = authArgs.room_id || '';\r\n\r\n  const [appId, appIdInput] = useTextInput({ id: 'appIdInput', initValue: APP_ID });\r\n  const [userId, userIdInput] = useTextInput({ id: 'userIdInput', initValue: USER_ID });\r\n  const [accessToken, accessTokenInput] = useTextInput({ id: 'accessTokenInput', initValue: ACCESS_TOKEN });\r\n\r\n  const login = () => {\r\n    const option: AuthOption = { userId };\r\n    if (IS_ACCESS_TOKEN_NEEDED || authArgs.access_token) option.accessToken = accessToken;\r\n    sbCalls.init(appId);\r\n    sbCalls.addDirectCallSound(SoundType.DIALING, '/sounds/Dialing.mp3');\r\n    sbCalls.addDirectCallSound(SoundType.RINGING, '/sounds/Ringing.mp3');\r\n    sbCalls.addDirectCallSound(SoundType.RECONNECTING, '/sounds/Reconnecting.mp3');\r\n    sbCalls.addDirectCallSound(SoundType.RECONNECTED, '/sounds/Reconnected.mp3');\r\n    return sbCalls.auth(option)\r\n      .then(user => {\r\n        storage.setItem('sbCalls', { appId, userId });\r\n        history.push( `${query.get('referrer') ? query.get('referrer') + `?room_id=${ROOM_ID}` : '/'}`);\r\n      })\r\n      .catch(error => {\r\n        toast.error(<ErrorMessage message={`Check entered information and try again.`} />, { autoClose: 2000 });\r\n      })\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (authArgs.app_id) login();\r\n  }, [])\r\n\r\n  return (\r\n    <FormContainer>\r\n      <InputLabel htmlFor=\"appIdInput\">App ID</InputLabel>\r\n      {appIdInput}\r\n      <InputLabel htmlFor=\"userIdInput\">User ID</InputLabel>\r\n      {userIdInput}\r\n      {\r\n        IS_ACCESS_TOKEN_NEEDED\r\n          && (\r\n          <>\r\n            <InputLabel htmlFor=\"accessTokenInput\">Access Token</InputLabel>\r\n            {accessTokenInput}\r\n          </>\r\n          )\r\n      }\r\n      <LoginButton\r\n        primary\r\n        size=\"mid\"\r\n        onClick={() => login()}\r\n      >\r\n        Sign in\r\n      </LoginButton>\r\n    </FormContainer>\r\n  );\r\n};\r\n\r\nexport default LoginForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}